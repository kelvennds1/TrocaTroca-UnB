<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script>
    $(document).ready(function() {
      var timeRemaining = 300; // 5 minutes in seconds

      var interval = setInterval(function() {
        var minutes = Math.floor(timeRemaining / 60);
        var seconds = timeRemaining % 60;

        var countdownText = minutes + " minutes " + seconds + " seconds";
        $("#countdown").text(countdownText);

        if (timeRemaining <= 0) {
          clearInterval(interval);
          $("#countdown").text("Time's up! Please try again.");
          $("#animation").hide();
          $("#message").text("Sorry, the swap was not successful. Please try again.");
        }

        timeRemaining--;
      }, 1000);
    });


  <!-- !TODO: not redirecting, redirect at full table population -->
    function checkSwapStatus() {
      fetch('/swap_status')
        .then(response => response.json())
        .then(data => {
          if (data.status === 'success') {
            window.location.href = '/swap_success';
          } else if (data.status === 'expired') {
            window.location.href = '/swap_time_expired_try_again';
          } else {
            pass
          }
        });
    }

    setInterval(checkSwapStatus, 1000000);
  
  </script>
</head>
<body>
  <div id="wrapper">
    <header>
      <div class="back-button">
        <img class="back-button-img" alt="" src="../static/img/back-button.svg" />
      </div>
      <div class="troca-troca">TrocaTroca</div>
    </header>
    <div class="status-text">Swap Status</div>
    <div id="animation" class="green-bar"></div>
    <div id="message" class="swap-message">Tell the other party to hurry</div>
    <div id="countdown" class="countdown"></div>
  </div>
</body>
</html>
